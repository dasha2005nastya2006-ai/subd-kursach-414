*(В приложении должна быть представлена подробная ER-диаграмма, созданная в pgAdmin 4 или другом инструме)*

#### <a id="logical_structure">3. Логическая структура БД</a>

Логическая модель преобразует концептуальную модель в схему реляционных таблиц. Все связи "один ко многим" реализуются через внешние ключи (FOREIGN KEY). Связь "один к одному" между `Автомобиль` и текущей `Сделкой` будет контролироваться бизнес-логикой и статусом автомобиля.

**Список таблиц:**

1.  `suppliers` (Поставщики)
2.  `cars` (Автомобили)
3.  `clients` (Клиенты)
4.  `employees` (Сотрудники)
5.  `positions` (Должности)
6.  `deals` (Сделки)

**Схема связей:**
*   `cars.supplier_id` -> `suppliers.supplier_id`
*   `deals.car_id` -> `cars.car_id`
*   `deals.client_id` -> `clients.client_id`
*   `deals.employee_id` -> `employees.employee_id`
*   `employees.position_id` -> `positions.position_id`

#### <a id="physical_structure">4. Физическая структура базы данных</a>

Физическая структура определяет конкретную реализацию в PostgreSQL. Указываются точные типы данных, ограничения (CONSTRAINTS), значения по умолчанию.

**Выбор типов данных:**

*   `SERIAL` / `BIGSERIAL`: Для автоинкрементных первичных ключей (`id`).
*   `VARCHAR(n)`: Для строк переменной длины (имена, названия, email, VIN). Для VIN используется `VARCHAR(17)`.
*   `INTEGER`: Для целочисленных значений (год выпуска, мощность).
*   `NUMERIC(p, s)`: Для денежных сумм (`purchase_price`, `sale_price`, `final_price`). Например, `NUMERIC(12, 2)`.
*   `DATE`: Для дат (`arrival_date`, `deal_date`).
*   `BOOLEAN`: Для флагов (можно использовать вместо `status`, но `ENUM` или `VARCHAR` предпочтительнее для статусов).
*   `ENUM` или `VARCHAR`: Для полей с ограниченным набором значений (`status`, `type`, `payment_method`). В PostgreSQL удобно использовать тип `ENUM`, созданный отдельной командой.

**Индексы (планируемые):**
*   Первичные ключи (PRIMARY KEY) индексируются автоматически.
*   Индекс по `cars.vin` (UNIQUE) для быстрого поиска по VIN.
*   Индекс по `cars.status` для быстрой фильтрации автомобилей в наличии.
*   Индекс по `deals.deal_date` для ускорения формирования отчетов за период.
*   Индекс по `clients.phone` для быстрого поиска клиента.
*   Составные индексы для часто используемых запросов (например, `(brand, model, year)` в таблице `cars`).

