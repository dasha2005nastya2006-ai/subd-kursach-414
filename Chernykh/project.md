### <p align="center"> Министерство образования, науки и молодежной политики Республики Коми

### <p align="center"> ГПОУ «Сыктывкарский политехнический техникум»

## <p align="center"> Курсовая работа

## <p align="center"> тема: Разработка базы данных для центра по продаже автомобилей </p>

#### <p align="right"> выполнила

 <p align="right">студент 4 курса

<p align="right">414 группы

<p align="right">Черных Эльвира Николаевна

#### <p align="right">проверил

<p align="right">Пунгин И.В.

<p align="right">дата проверки:

<p align="center">Сыктывкар, 2025 г.

***

## Задание на курсовую работу по МДК 11.01 "Технология разработки и защиты баз данных"

Специальность: <ins> 09.02.07 "Информационные системы и программирование"  </ins>

Тема курсовой работы: Разработка базы данных для центра по продаже автомобилей

Срок представления работы к защите: <ins> 22 декабря 2025 года. </ins>

Перечень подлежащих разработке вопросов:

1. Анализ предметной области. Постановка задачи.

    1.1. Описание предметной области и функции решаемых задач.

    1.2. Перечень входных данных.

    1.3. Перечень выходных данных

    1.4. Ограничения предметной области (если таковые имеются).

    1.5. Взаимодействие с другими программами.

3. Инфологическая (концептуальная) модель базы данных.

    2.1. Выделение информационных объектов.

    2.2. Определение атрибутов объектов.

    2.3. Определение отношений и мощности отношений между объектами.

    2.4. Построение концептуальной модели.

4. Логическая структура БД.

5. Физическая структура базы данных.

6. Реализация проекта в среде конкретной СУБД.

    5.1. Создание таблиц.

    5.2. Создание запросов.

    5.3. Разработка интерфейса.

    5.4. Назначение прав доступа.

    5.5. Создание индексов.

    5.6. Разработка стратегии резервного копирования базы данных


Руководитель работы __________________ <ins> И. В. Пунгин </ins>

Задание принял к исполнению _______________________________ <ins> Черных Э.Н. </ins>



## <a id="content">Содержание</a>

1. [Введение](#introduction)
    - [Цель работы](#target)
    - [Задачи работы](#tasks)
2. [Основная часть](#main)
    - [Анализ предметной области. Постановка задачи](#analysis)
    - [Инфологическая (концептуальная) модель базы данных](#infological_model)
    - [Логическая структура БД](#logical_structure)
    - [Физическая структура базы данных](#physical_structure)
    - [Реализация проекта в среде конкретной СУБД](#project_realization)
3. [Заключение](#conclusion)
4. [Список использованных информационных источников](#literature)
5. [Приложения](#applications)

## <a id="introduction">Введение</a>

В современных условиях высококонкурентного рынка продажа автомобилей требует эффективного управления большими объемами информации: данными об автомобилях, клиентах, поставщиках, сделках и сотрудниках. Автоматизация этих процессов с помощью специализированной базы данных (БД) является критически важной задачей для любого современного автомобильного центра. Такая система позволяет не только хранить информацию в структурированном виде, но и оперативно извлекать аналитические данные, оптимизировать складские запасы, управлять взаимоотношениями с клиентами (CRM) и контролировать финансовые потоки.

Разработка базы данных для центра по продаже автомобилей направлена на создание единого информационного пространства, которое объединит все аспекты бизнеса: от закупки автомобилей у поставщиков до заключения договоров купли-продажи с конечными покупателями. Внедрение БД позволит устранить дублирование данных, снизить количество ошибок при ручном вводе, ускорить обработку заявок и повысить общую эффективность работы центра.

Таким образом, актуальность данной курсовой работы обусловлена необходимостью создания надежного, масштабируемого и удобного инструмента для управления ключевыми бизнес-процессами автомобильного центра, что в конечном итоге ведет к повышению качества обслуживания клиентов и росту прибыли.

#### <a id="target">Цель работы</a>

Целью данной курсовой работы является проектирование и реализация реляционной базы данных для центра по продаже автомобилей в среде СУБД PostgreSQL с использованием клиента pgAdmin 4. Данная БД должна обеспечивать комплексный учет всех бизнес-процессов, включая управление автомобильным парком, клиентской базой, заказами, поставщиками и сотрудниками.

#### <a id="tasks">Задачи работы</a>

Для достижения поставленной цели необходимо решить следующие задачи:

1.  Провести анализ предметной области "Продажа автомобилей", выявить ключевые сущности, процессы и требования к системе.
2.  Спроектировать инфологическую (концептуальную) модель данных, отражающую сущности предметной области и связи между ними.
3.  Разработать логическую структуру базы данных, преобразовав концептуальную модель в реляционную схему (таблицы, атрибуты, типы данных, связи).
4.  Определить физическую структуру БД: выбрать типы данных, запланировать индексы, триггеры и ограничения целостности для СУБД PostgreSQL.
5.  Реализовать проект в pgAdmin 4:
    *   Создать схему базы данных и все необходимые таблицы.
    *   Написать и выполнить набор базовых SQL-запросов (SELECT, INSERT, UPDATE, DELETE) и аналитических запросов (JOIN, агрегатные функции).
    *   Создать необходимые индексы для оптимизации производительности.
    *   Разработать простой пользовательский интерфейс (например, набор представлений - VIEW) для удобства работы.
    *   Спроектировать и назначить роли и права доступа для различных пользователей (администратор, менеджер по продажам, кладовщик).
    *   Предложить стратегию резервного копирования базы данных.

## <a id="main">Основная часть</a>

#### <a id="analysis">1. Анализ предметной области. Постановка задачи</a>

**1.1. Описание предметной области и функции решаемых задач**

*   **Предметная область:** Деятельность автомобильного дилерского центра, включающая закупку новых и подержанных автомобилей у поставщиков и производителей, их хранение на складе (автостоянке), продажу физическим и юридическим лицам, а также ведение учета клиентов, сделок и сотрудников.
*   **Функции решаемых задач:**
    *   **Учет автомобилей:** Ведение каталога автомобилей с детальными характеристиками (марка, модель, VIN, год выпуска, цвет, тип двигателя, комплектация), отслеживание их статуса (на складе, забронирован, продан, в сервисе).
    *   **Управление складом:** Контроль наличия автомобилей на стоянке, учет их местоположения, стоимость закупки и продажи.
    *   **Работа с клиентами:** Ведение базы данных клиентов (покупателей), история их обращений, тест-драйвов, покупок и предпочтений.
    *   **Оформление сделок:** Фиксация договоров купли-продажи, заказов на покупку, данных о платежах и способах оплаты.
    *   **Учет поставщиков:** Хранение информации о компаниях-поставщиках автомобилей.
    *   **Управление персоналом:** Учет сотрудников центра (менеджеры, администраторы), их ролей и прав доступа к системе.
    *   **Формирование отчетности:** Генерация отчетов по продажам, остаткам на складе, активности менеджеров, популярным моделям и т.д.

**1.2. Перечень входных данных**

*   Данные об автомобилях: VIN, марка, модель, год выпуска, цвет, пробег (для б/у), тип двигателя, объем двигателя, мощность, тип КПП, тип привода, комплектация, цена закупки, цена продажи, дата поступления, статус, ID поставщика.
*   Данные о клиентах: ФИО, тип (физ./юр. лицо), паспортные данные/реквизиты организации, контакты (телефон, email), адрес.
*   Данные о сделках: номер договора, дата сделки, ID автомобиля, ID клиента, ID менеджера, окончательная цена продажи, способ оплаты (наличные, кредит, лизинг), статус сделки (оформлена, оплачена, доставлена).
*   Данные о поставщиках: название, ИНН, юридический адрес, контактное лицо, телефон.
*   Данные о сотрудниках: ФИО, должность, контакты, логин и хэш пароля для системы.

**1.3. Перечень выходных данных (отчетов)**

*   Каталог доступных автомобилей с фильтрацией по параметрам.
*   Отчет о продажах за период (по менеджерам, по моделям, по сумме).
*   Отчет об остатках автомобилей на складе.
*   Отчет о финансовых результатах (прибыль = сумма продаж - сумма закупок).
*   История сделок конкретного клиента.
*   Рейтинг менеджеров по продажам.
*   Список автомобилей, ожидающих поставки от конкретного поставщика.

**1.4. Ограничения предметной области**

*   Один автомобиль за один момент времени может находиться только в одном статусе и быть связан только с одной активной сделкой.
*   Клиент (физ. лицо) идентифицируется уникальными паспортными данными.
*   Цена продажи в сделке не может быть ниже цены закупки автомобиля (для контроля рентабельности).
*   Автомобиль с статусом "Продан" не может быть повторно добавлен в новую сделку.

**1.5. Взаимодействие с другими программами**

*   **Бухгалтерские системы (1С):** Обмен данными о сделках, платежах и клиентах для ведения финансового учета.
*   **CRM-системы:** Глубокая интеграция для управления воронкой продаж, рассылок и аналитики клиентов.
*   **Веб-сайт центра:** Синхронизация каталога автомобилей (наличие, цены, характеристики) для отображения на сайте.
*   **Сервисная система:** Передача данных о проданных автомобилях для планирования сервисного обслуживания.

#### <a id="infological_model">2. Инфологическая (концептуальная) модель базы данных</a>

**2.1. Выделение информационных объектов (сущностей)**

1.  `Автомобиль` - основная продаваемая единица.
2.  `Клиент` - покупатель автомобиля.
3.  `Сделка` - факт продажи автомобиля клиенту.
4.  `Поставщик` - организация, у которой центр закупает автомобили.
5.  `Сотрудник` - работник центра, в частности, менеджер по продажам.
6.  `Должность` - справочник должностей сотрудников (для управления правами).

**2.2. Определение атрибутов объектов**

*   **Автомобиль:** `car_id`, `vin` (уникальный), `brand`, `model`, `year`, `color`, `mileage`, `engine_type`, `engine_volume`, `power`, `transmission`, `drive_type`, `trim_level`, `purchase_price`, `sale_price`, `arrival_date`, `status` ('В наличии', 'Забронирован', 'Продан', 'На сервисе'), `supplier_id`.
*   **Клиент:** `client_id`, `last_name`, `first_name`, `middle_name`, `type` ('Физическое лицо', 'Юридическое лицо'), `passport_number` (для физ. лиц), `company_name` (для юр. лиц), `inn` (для юр. лиц), `phone`, `email`, `address`.
*   **Сделка:** `deal_id`, `deal_date`, `car_id`, `client_id`, `employee_id`, `final_price`, `payment_method` ('Наличные', 'Кредит', 'Лизинг'), `deal_status` ('Оформлена', 'Оплачена', 'Завершена').
*   **Поставщик:** `supplier_id`, `name`, `inn`, `legal_address`, `contact_person`, `phone`.
*   **Сотрудник:** `employee_id`, `last_name`, `first_name`, `middle_name`, `position_id`, `phone`, `email`, `login`, `password_hash`.
*   **Должность:** `position_id`, `position_name` (например, 'Администратор', 'Менеджер по продажам', 'Директор').

**2.3. Определение отношений и мощности отношений между объектами**

1.  **Поставщик — Автомобиль:** **Один ко многим (1:M)**. Один поставщик может поставить много автомобилей, но каждый автомобиль закуплен у одного конкретного поставщика.
2.  **Автомобиль — Сделка:** **Один к одному (1:1) / Один ко многим (1:M) в истории.** В один момент времени один автомобиль может фигурировать только в одной активной сделке (1:1). За всю историю с автомобилем может быть связана только одна успешная сделка о продаже, но могут быть записи о бронированиях (1:M).
3.  **Клиент — Сделка:** **Один ко многим (1:M).** Один клиент может совершить несколько сделок (покупок) в разное время.
4.  **Сотрудник — Сделка:** **Один ко многим (1:M).** Один сотрудник (менеджер) может оформить множество сделок.
5.  **Должность — Сотрудник:** **Один ко многим (1:M).** На одной должности может работать несколько сотрудников.

**2.4. Построение концептуальной модели**

```
[Поставщик] 1 ----< [Автомобиль]
                         |
                         | (история)
                         <
                         |
                        [Сделка]
                         / \
                        /   \
                    M /     \ 1
                      /       \
               [Клиент]     [Сотрудник]
                                 |
                                 | M
                                 <
                                 |
                           [Должность]
```
*(В приложении должна быть представлена подробная ER-диаграмма, созданная в pgAdmin 4 или другом инструме)*

#### <a id="logical_structure">3. Логическая структура БД</a>

Логическая модель преобразует концептуальную модель в схему реляционных таблиц. Все связи "один ко многим" реализуются через внешние ключи (FOREIGN KEY). Связь "один к одному" между `Автомобиль` и текущей `Сделкой` будет контролироваться бизнес-логикой и статусом автомобиля.

**Список таблиц:**

1.  `suppliers` (Поставщики)
2.  `cars` (Автомобили)
3.  `clients` (Клиенты)
4.  `employees` (Сотрудники)
5.  `positions` (Должности)
6.  `deals` (Сделки)

**Схема связей:**
*   `cars.supplier_id` -> `suppliers.supplier_id`
*   `deals.car_id` -> `cars.car_id`
*   `deals.client_id` -> `clients.client_id`
*   `deals.employee_id` -> `employees.employee_id`
*   `employees.position_id` -> `positions.position_id`

#### <a id="physical_structure">4. Физическая структура базы данных</a>

Физическая структура определяет конкретную реализацию в PostgreSQL. Указываются точные типы данных, ограничения (CONSTRAINTS), значения по умолчанию.

**Выбор типов данных:**

*   `SERIAL` / `BIGSERIAL`: Для автоинкрементных первичных ключей (`id`).
*   `VARCHAR(n)`: Для строк переменной длины (имена, названия, email, VIN). Для VIN используется `VARCHAR(17)`.
*   `INTEGER`: Для целочисленных значений (год выпуска, мощность).
*   `NUMERIC(p, s)`: Для денежных сумм (`purchase_price`, `sale_price`, `final_price`). Например, `NUMERIC(12, 2)`.
*   `DATE`: Для дат (`arrival_date`, `deal_date`).
*   `BOOLEAN`: Для флагов (можно использовать вместо `status`, но `ENUM` или `VARCHAR` предпочтительнее для статусов).
*   `ENUM` или `VARCHAR`: Для полей с ограниченным набором значений (`status`, `type`, `payment_method`). В PostgreSQL удобно использовать тип `ENUM`, созданный отдельной командой.

**Индексы (планируемые):**
*   Первичные ключи (PRIMARY KEY) индексируются автоматически.
*   Индекс по `cars.vin` (UNIQUE) для быстрого поиска по VIN.
*   Индекс по `cars.status` для быстрой фильтрации автомобилей в наличии.
*   Индекс по `deals.deal_date` для ускорения формирования отчетов за период.
*   Индекс по `clients.phone` для быстрого поиска клиента.
*   Составные индексы для часто используемых запросов (например, `(brand, model, year)` в таблице `cars`).

