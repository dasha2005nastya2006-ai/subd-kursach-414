# ER-диаграмма системы учёта гитар

## Полная схема базы данных

```mermaid
erDiagram
    %% Основные сущности
    Производитель {
        int id PK "ID"
        string название "Название"
        string страна "Страна"
        date год_основания "Год основания"
    }

    Категория {
        int id PK "ID"
        string название "Название"
        text описание "Описание"
    }

    Гитара {
        int id PK "ID"
        string название "Название"
        int производитель_id FK "Производитель"
        int категория_id FK "Категория"
        string тип "Тип"
        int год_выпуска "Год выпуска"
        string материал "Материал"
        string цвет "Цвет"
        int лады "Лады"
        decimal цена "Цена"
        int количество "Количество"
    }

    Поставщик {
        int id PK "ID"
        string название "Название"
        string контактное_лицо "Контакт"
        string телефон "Телефон"
        string email "Email"
        string адрес "Адрес"
    }

    Клиент {
        int id PK "ID"
        string ФИО "ФИО"
        string телефон "Телефон"
        string email "Email"
        string адрес "Адрес"
        date дата_регистрации "Дата регистрации"
    }

    Сотрудник {
        int id PK "ID"
        string ФИО "ФИО"
        string должность "Должность"
        string телефон "Телефон"
        string email "Email"
        date дата_найма "Дата найма"
        decimal зарплата "Зарплата"
    }

    %% Транзакционные сущности
    Поставка {
        int id PK "ID"
        date дата "Дата"
        int поставщик_id FK "Поставщик"
        decimal общая_сумма "Сумма"
    }

    Продажа {
        int id PK "ID"
        date дата "Дата"
        int клиент_id FK "Клиент"
        int сотрудник_id FK "Сотрудник"
        decimal общая_сумма "Сумма"
    }

    Позиция_поставки {
        int id PK "ID"
        int поставка_id FK "Поставка"
        int гитара_id FK "Гитара"
        int количество "Количество"
        decimal цена_закупки "Цена"
    }

    Позиция_продажи {
        int id PK "ID"
        int продажа_id FK "Продажа"
        int гитара_id FK "Гитара"
        int количество "Количество"
        decimal цена "Цена"
    }

    %% Связи
    Производитель ||--o{ Гитара : "производит"
    Категория ||--o{ Гитара : "классифицирует"
    Поставщик ||--o{ Поставка : "осуществляет"
    Поставка ||--o{ Позиция_поставки : "содержит"
    Гитара ||--o{ Позиция_поставки : "включена в"
    Гитара ||--o{ Позиция_продажи : "включена в"
    Продажа ||--o{ Позиция_продажи : "состоит из"
    Клиент ||--o{ Продажа : "совершает"
    Сотрудник ||--o{ Продажа : "обслуживает"
```

## Условные обозначения
- **PK** - Первичный ключ
- **FK** - Внешний ключ
- **||--o{** - Один ко многим
- **o--o** - Многие ко многим
