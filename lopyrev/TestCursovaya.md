# **Министерство образования, науки и молодежной политики Республики Коми**

**ГПОУ "Сыктывкарский политехнический техникум"**

**Курсовая работа**

**тема: База данных для домашней видеотеки**

**выполнил**

студент 4 курса  
414 группы  
Лопырев Владислав Евгеньевич

**Проверил**

Пунгин И.В.

дата проверки:

Сыктывкар, 2025

---

## **СОДЕРЖАНИЕ**

1. [ВВЕДЕНИЕ](#введение)
   - [1.1 Актуальность темы](#актуальность-темы)
   - [1.2 Цель и задачи](#цель-и-задачи)
   - [1.3 Практическая значимость](#практическая-значимость)
2. [Анализ предметной области](#анализ-предметной-области)
   - [2.1 Описание предметной области](#описание-предметной-области)
   - [2.2 Входные и выходные данные](#входные-и-выходные-данные)
   - [2.3 Ограничения и требования](#ограничения-и-требования)
3. [Проектирование базы данных](#проектирование-базы-данных)
   - [3.1 Концептуальная модель](#концептуальная-модель)
   - [3.2 Логическая структура](#логическая-структура)
   - [3.3 Физическая реализация в PostgreSQL](#физическая-реализация-в-postgresql)
   - [3.4 Нормализация таблиц](#нормализация-таблиц)
4. [Реализация системы](#реализация-системы)
   - [4.1 Создание таблиц и индексов](#создание-таблиц-и-индексов)
   - [4.2 Разработка интерфейса на Python](#разработка-интерфейса-на-python)
   - [4.3 Реализация бизнес-логики](#реализация-бизнес-логики)
   - [4.4 Тестирование системы](#тестирование-системы)
5. [Безопасность и оптимизация](#безопасность-и-оптимизация)
   - [5.1 Защита данных](#защита-данных)
   - [5.2 Оптимизация производительности](#оптимизация-производительности)
   - [5.3 Оптимизация запросов](#оптимизация-запросов)
   - [5.4 Методика тестирования](#методика-тестирования)
6. [Заключение](#заключение)
   - [6.1 Результаты работы](#результаты-работы)
   - [6.2 Перспективы развития](#перспективы-развития)
7. [Список литературы](#список-литературы)
8. [Приложения](#приложения)
   - [Приложение 1](#приложение-1)
   - [Приложение 2](#приложение-2)
   - [Приложение 3](#приложение-3)

---

## **ВВЕДЕНИЕ**

### **1.1 Актуальность темы**

С развитием стриминговых сервисов и увеличением объема медиаконтента у пользователей накапливаются большие объемы контента, которые требуют систематизации и учета. По данным исследования Digital Media Consumption 2024, среднестатистический пользователь тратит до 15 часов в неделю на просмотр фильмов и сериалов, при этом:

- 68% пользователей имеют более 100 фильмов в своей коллекции
- 45% испытывают трудности с поиском нужного контента
- 72% хотели бы анализировать свои просмотры

Проблема организации домашней видеотеки становится все более актуальной по нескольким причинам:

1. **Увеличение объема контента** — пользователи имеют доступ к тысячам фильмов и сериалов через различные платформы;
2. **Необходимость анализа** — некоторые пользователи предпочитают анализировать свои предпочтения и вести статистику просмотров;

Разработка такой специализированной базы данных позволяет решить эти проблемы, предоставляя пользователю удобный инструмент для учета и анализа своей коллекции фильмов и сериалов.

### **1.2 Цель и задачи**

**Целью** моей курсовой работы является разработка системы управления домашней видеотекой на основе реляционной базы данных с пользовательским интерфейсом.

**Основные задачи:**
1. Провести анализ предметной области;
2. Разработать структуру модели базы данных;
3. Реализация базы данных в СУБД PostgreSQL;
4. Создать пользовательский интерфейс на Python;
5. Реализовать основные функции для возможности взаимодействия с базой данных такие как: добавление, поиск, редактирование, статистика и т.д;
6. Разработка защиты базы данных.

### **1.3 Практическая значимость**

Разработанная система имеет практическую ценность для:

- **Личного использования** — как инструмент для организации своей домашней видеотеки;
- **Коммерческих систем** — как основа для более сложных решений учета медиаконтента.

Данная система позволяет эффективно управлять своей коллекцией фильмов, анализировать и получать статистическую информацию о своей видеотеке.

---

## **Анализ предметной области**

### **2.1 Описание предметной области**

Домашняя видеотека представляет собой совокупность фильмов, которые пользователь смотрел или будет планировать посмотреть. Основные компоненты системы:

**Фильмы** — основные объекты учета:
- Название;
- Год выпуска;
- Длительность;
- Описание сюжета;
- Пользовательский рейтинг.

**Актеры** — участники фильмов. База хранит информацию об актерах и их ролях в конкретных фильмах.

**Жанры** — классификация фильмов. Один фильм может иметь несколько жанров.

**Просмотры** — факт того, что пользователь посмотрел фильм. Сюда включается дата просмотра и заметки о фильме.

### **2.2 Входные и выходные данные**

**Входные данные:**

1. **Информация о фильмах:**
   - Название (обязательно)
   - Год выпуска (целое число)
   - Длительность в минутах
   - Описание (текст)
   - Пользовательский рейтинг (1-10)

2. **Информация об актерах:**
   - Имя актера (обязательно)

3. **Информация о жанрах:**
   - Название жанра (обязательно)

4. **Данные о просмотрах:**
   - Дата просмотра (невозможно в будущем)
   - Заметки пользователя

**Выходные данные:**

1. **Каталог фильмов** — список всех фильмов с возможностью сортировки и фильтрации.
2. **Детальная информация о фильмах:**
   - Основные данные
   - Список актеров
   - Жанры
   - История просмотров
3. **Статистика:**
   - Количество фильмов в коллекции
   - Средний рейтинг
   - Распределение по жанрам
   - Популярные актеры
   - Частота просмотров

### **2.3 Ограничения и требования**

**Бизнес-ограничения:**

1. **Временные ограничения:**
   - Нельзя добавить просмотр фильма, который еще не вышел.

2. **Логические ограничения:**
   - Рейтинг фильма должен быть в диапазоне от 1 до 10
   - Длительность может быть только положительным числом
   - Название фильма обязательно для заполнения

3. **Уникальность данных:**
   - Комбинация название + год выпуска обязательно должна быть уникальной
   - Названия жанров тоже уникальны

**Функциональные требования:**

1. Управление фильмами — добавление, редактирование, удаление
2. Поиск и фильтрация — по названию, году, жанру и актерам
3. Управление актерами и жанрами — добавление, просмотр
4. Учет просмотров — добавление даты просмотра и заметок
5. Статистика — отчет о коллекции фильмов

---

## **Проектирование базы данных**

### **3.1 Концептуальная модель**

Концептуальная модель представляет собой диаграмму, отражающую основные сущности системы и связи между ними.

**Основные сущности:**
1. Фильм (Movie) — центральная сущность системы
2. Актер (Actor) — участник фильма
3. Жанр (Genre) — категория фильма
4. Просмотр (Viewing) — факт просмотра фильма

**Связи между сущностями:**
1. **Фильм — Актер:**
   - Один актер может быть в нескольких фильмах
   - Один фильм может иметь несколько актеров
   - Реализация в таблице movie_actor

2. **Фильм — Жанр:**
   - Один фильм может относиться к нескольким жанрам
   - Один жанр может содержать много фильмов
   - Реализация в таблице movie_genre

3. **Фильм — Просмотр:**
   - Один фильм может просматриваться много раз
   - Каждый просмотр относится к одному фильму

### **3.2 Логическая структура**

Логическая структура базы данных состоит из 6 таблиц, которые приведены к третьей нормальной форме.

1. **movies — фильмы:**
   - id — первичный ключ
   - name — название фильма
   - release_year — год выпуска фильма
   - duration — длительность фильма в минутах
   - description — описание фильма
   - my_rating — рейтинг пользователя

2. **actors — актеры:**
   - id — первичный ключ
   - actor_name — имя актера

3. **genres — жанры:**
   - id — первичный ключ
   - genre_name — название жанра (уникальное)

4. **viewings — просмотры:**
   - id — первичный ключ
   - movie_id — внешний ключ к фильму
   - viewing_date — дата просмотра
   - notes — заметки

**Таблицы связи:**

5. **movie_actors — связь фильмов с актерами:**
   - movie_id — внешний ключ к фильму
   - actor_id — внешний ключ к актеру
   - Первичный ключ (movie_id, actor_id)

6. **movie_genres — связь фильмов и жанров:**
   - movie_id — внешний ключ к фильму
   - genre_id — внешний ключ к жанру
   - Первичный ключ (movie_id, genre_id)

### **3.3 Физическая реализация в PostgreSQL**

Физическая реализация базы данных включает в себя создание таблиц, индексов и ограничений.

**Таблица movies:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| id | Serial primary key | Первичный ключ |
| name | Varchar(200) not null | Название фильма |
| release_year | Integer | Год релиза |
| duration | Integer check(duration > 0) | Длительность |
| description | Text | Описание |
| my_rating | Integer check(my_rating between 1 and 10) | Рейтинг пользователя |

**Таблица actors:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| id | Serial primary key | Первичный ключ |
| actor_name | Varchar(100) not null | Имя актера |

**Таблица genres:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| id | Serial primary key | Первичный ключ |
| genre_name | Varchar(50) unique not null | Название жанра |

**Таблица просмотров:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| id | Serial primary key | Первичный ключ |
| movie_id | Integer references movies(id) | Внешний ключ |
| viewing_date | Date not null | Дата просмотра |
| notes | Text | Заметка |

**Таблица связь фильм-актер:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| movie_id | Integer references movies(id) | Внешний ключ |
| actor_id | Integer references actors(id) | Внешний ключ |

**Таблица связь фильм-жанр:**

| Поле | Тип данных | Описание |
|------|------------|----------|
| movie_id | Integer references movies(id) | Внешний ключ |
| genre_id | Integer references genres(id) | Внешний ключ |

### **3.4 Нормализация таблиц**

1. **1 нормальная форма:**
   - Разделены составные поля
   - Устранены массивы в ячейках

2. **2 нормальная форма:**
   - Выделены таблицы-справочники
   - Созданы таблицы связи

3. **3 нормальная форма:**
   - Разделены данные по тематическим группам
   - Обеспечена независимость не ключевых атрибутов

---

## **Реализация системы**

### **4.1 Создание таблиц и индексов**

База данных была разработана в СУБД PostgreSQL 14.

**Наполнение тестовыми данными:**

**Жанры:**
```sql
INSERT INTO genres (genre_name) VALUES 
('Драма'), ('Комедия'), ('Ужасы'), ('Боевик'), ('Фантастика'),
('Триллер'), ('Мелодрама'), ('Детектив'), ('Мультфильм'),
('Фэнтези'), ('Приключения'), ('Исторический'), ('Криминал'),
('Биография'), ('Вестерн');
